name: Docker Image CI

on:
  push:
    branches: [ "dev" ]

jobs:

  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3
    - name: Get all test, doc and src files that have changed
      id: changed-files-yaml
      uses: tj-actions/changed-files@v37
      with:
        files_yaml: |
          dockerfile:
            - '**/Dockerfile'
    - name: Run step if test file(s) change
      # NOTE: The key has to start with the same key used above e.g. `test_(...)` | `doc_(...)` | `src_(...)` when trying to access the `any_changed` output.
      if: steps.changed-files-yaml.outputs.test_any_changed == 'true'  
      run: |
        echo "One or more test file(s) has changed."
        echo "List all the files that have changed: ${{ steps.changed-files-yaml.outputs.test_all_changed_files }}
#     - name: Docker Setup QEMU
#       # You may pin to the exact commit or the version.
#       # uses: docker/setup-qemu-action@2b82ce82d56a2a04d2637cd93a637ae1b359c0a7
#       uses: docker/setup-qemu-action@v2.2.0
#     - name: Docker Setup Buildx
#       # You may pin to the exact commit or the version.
#       # uses: docker/setup-buildx-action@4c0219f9ac95b02789c1075625400b2acbff50b1
#       uses: docker/setup-buildx-action@v2.9.1
#     - name: Docker Login
#       # You may pin to the exact commit or the version.
#       # uses: docker/login-action@465a07811f14bebb1938fbed4728c6a1ff8901fc
#       uses: docker/login-action@v2.2.0
#       with:
#         username: ${{ secrets.DOCKERHUB_USERNAME }}
#         password: ${{ secrets.DOCKERHUB_TOKEN }}
#     - name: Build the Docker image
#       run: docker build . --file Dockerfile --tag my-image-name:$(date +%s)
